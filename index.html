<!DOCTYPE html>

<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="×× ×”×œ ××©×™××•×ª ××™×©×™">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="××©×™××•×ª">
    <title>×× ×”×œ ××©×™××•×ª ××™×©×™</title>

```
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
    }

    .header {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        position: relative;
    }

    .version-info {
        position: absolute;
        top: 10px;
        right: 15px;
        color: white;
        background: rgba(102, 126, 234, 0.9);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: 500;
        text-align: right;
        line-height: 1.3;
    }

    .version-number {
        font-weight: bold;
        display: block;
    }

    .version-date {
        opacity: 0.85;
        font-size: 10px;
    }

    .header-content {
        padding-left: 200px;
    }

    .header-actions {
        position: absolute;
        top: 20px;
        left: 20px;
        display: flex;
        gap: 8px;
    }

    .btn-icon {
        min-width: 44px;
        height: 44px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }

    .btn-add-task {
        background: #8b5cf6;
    }

    .btn-add-task:hover {
        background: #7c3aed;
    }

    .btn-settings {
        background: #6b7280;
    }

    .btn-settings:hover {
        background: #4b5563;
    }

    .btn-whatsapp {
        background: #25d366;
    }

    .btn-whatsapp:hover {
        background: #20ba5a;
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .modal.active {
        display: flex;
    }

    .modal-content {
        background: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .modal-close {
        background: #ef4444;
        color: white;
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-close:hover {
        background: #dc2626;
    }

    .settings-group {
        margin-bottom: 20px;
    }

    .settings-label {
        font-weight: bold;
        display: block;
        margin-bottom: 8px;
        color: #374151;
    }

    .settings-input {
        width: 100%;
        padding: 12px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 16px;
    }

    .settings-input:focus {
        outline: none;
        border-color: #667eea;
    }

    .settings-hint {
        font-size: 13px;
        color: #6b7280;
        margin-top: 5px;
    }

    h1 {
        color: #667eea;
        font-size: 28px;
        margin-bottom: 10px;
    }

    .sync-date {
        background: #f0fdf4;
        border: 1px solid #86efac;
        color: #166534;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 13px;
        margin-top: 10px;
        display: inline-block;
    }

    .btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .btn:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn:active {
        transform: translateY(0);
    }

    .btn-secondary {
        background: #10b981;
    }

    .btn-secondary:hover {
        background: #059669;
    }

    .btn-delete {
        background: #ef4444;
    }

    .btn-delete:hover {
        background: #dc2626;
    }

    .btn-orange {
        background: #f59e0b;
    }

    .btn-orange:hover {
        background: #d97706;
    }

    .btn-small {
        padding: 8px 16px;
        font-size: 14px;
    }

    .sync-section {
        display: none;
    }

    .sync-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .list-selector {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .list-control {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
    }

    select, input, textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 16px;
        margin-bottom: 10px;
        transition: border-color 0.3s;
    }

    select:focus, input:focus, textarea:focus {
        outline: none;
        border-color: #667eea;
    }

    .task-form {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .filter-section {
        background: white;
        border-radius: 15px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .filter-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
    }

    .filter-row select {
        margin-bottom: 0;
    }

    .task-item {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border-right: 5px solid #667eea;
        transition: all 0.3s;
        cursor: pointer;
    }

    .task-item:hover {
        transform: translateX(-5px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }

    .task-item.completed {
        opacity: 0.6;
        border-right-color: #10b981;
    }

    .task-item.deleted {
        opacity: 0.5;
        border-right-color: #ef4444;
        background: #fef2f2;
    }

    .task-item.selected {
        border: 3px solid #667eea;
    }

    .task-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .task-title {
        font-size: 18px;
        font-weight: bold;
        flex: 1;
        padding-left: 10px;
    }

    .task-title.completed {
        text-decoration: line-through;
        color: #6b7280;
    }

    .task-meta {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
    }

    .badge {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: bold;
    }

    .badge-category {
        background: #dbeafe;
        color: #1e40af;
    }

    .badge-priority-×’×‘×•×” {
        background: #fee2e2;
        color: #991b1b;
    }

    .badge-priority-×¨×’×™×œ {
        background: #dbeafe;
        color: #1e40af;
    }

    .badge-priority-× ××•×š {
        background: #f3f4f6;
        color: #374151;
    }

    .task-notes {
        background: #fef3c7;
        padding: 12px;
        border-radius: 8px;
        margin-top: 10px;
        font-size: 14px;
        white-space: pre-wrap;
    }

    .task-actions {
        display: flex;
        gap: 10px;
    }

    .hidden {
        display: none;
    }

    .status-message {
        background: #dbeafe;
        color: #1e40af;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 15px;
        text-align: center;
        font-weight: bold;
    }

    .stats {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }

    .stat-item {
        background: #f3f4f6;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 14px;
    }

    .notes-section {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    @media (max-width: 600px) {
        body {
            padding: 10px;
        }
        
        h1 {
            font-size: 22px;
        }

        .header {
            padding: 20px 15px;
            padding-top: 50px;
        }

        .version-info {
            top: 10px;
            right: 10px;
            font-size: 10px;
            padding: 5px 10px;
        }

        .version-date {
            font-size: 9px;
        }

        .header-content {
            padding-left: 0;
            padding-top: 0;
        }

        .header-actions {
            position: static;
            margin-bottom: 15px;
            gap: 8px;
        }

        .btn-icon {
            flex: 1;
            min-width: auto;
        }

        .sync-date {
            font-size: 11px;
            padding: 6px 10px;
        }

        .list-selector, .filter-section, .task-form, .notes-section {
            padding: 15px;
        }

        .btn-small {
            padding: 10px 14px;
            font-size: 13px;
        }

        .task-item {
            padding: 15px;
        }

        .task-title {
            font-size: 16px;
        }

        .task-meta {
            gap: 8px;
        }

        .badge {
            font-size: 11px;
            padding: 4px 10px;
        }

        .stats {
            gap: 8px;
        }

        .stat-item {
            font-size: 12px;
            padding: 6px 10px;
        }

        select, input, textarea {
            font-size: 16px;
        }

        .task-actions {
            flex-direction: row;
            gap: 8px;
        }

        .task-actions .btn-small {
            flex: 1;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <div class="version-info">
                <span class="version-number">v2.9.3</span>
                <span class="version-date">26.02.2026</span>
            </div>
            <div class="header-actions">
                <button onclick="scrollToAddTask()" class="btn btn-add-task btn-icon" title="×”×•×¡×£ ××©×™××”">
                    â•
                </button>
                <button onclick="exportData()" class="btn btn-secondary btn-icon" title="×™×™×¦× ×œ×§×•×‘×¥">
                    ğŸ“¥
                </button>
                <button onclick="document.getElementById('importFileInput').click()" class="btn btn-orange btn-icon" title="×™×™×‘× ××§×•×‘×¥">
                    ğŸ“¤
                </button>
                <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="importData(event)">
                <button onclick="openSettings()" class="btn btn-settings btn-icon" title="×”×’×“×¨×•×ª">
                    âš™ï¸
                </button>
            </div>
            <div class="header-content">
                <h1>ğŸ“š ×× ×”×œ ××©×™××•×ª ××™×©×™</h1>
                <p style="color: #6b7280; margin-top: 10px;">× ×™×”×•×œ ××©×™××•×ª ×—×›× ×¢× ××™×–×•×’ ××•×˜×•××˜×™</p>
                <div id="lastSyncDate" class="sync-date hidden"></div>
            </div>
        </div>

```
    <div id="statusMessage"></div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: #667eea; margin: 0;">âš™ï¸ ×”×’×“×¨×•×ª</h2>
                <button onclick="closeSettings()" class="modal-close">âœ•</button>
            </div>
            
            <div class="settings-group">
                <label class="settings-label">ğŸ”‘ ×§×•×“ ×’×™×©×”</label>
                <input 
                    type="text" 
                    id="accessCode" 
                    class="settings-input" 
                    placeholder="×”×›× ×¡ ×§×•×“ ×’×™×©×” ×©×§×™×‘×œ×ª"
                    dir="ltr"
                    maxlength="20"
                >
                <p class="settings-hint">×§×•×“ ×’×™×©×” ××™×©×™ ×©×§×™×‘×œ×ª ××”×× ×”×œ</p>
            </div>

            <div class="settings-group">
                <label class="settings-label">ğŸ“± ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ×ª×–×›×•×¨×•×ª WhatsApp</label>
                <input 
                    type="tel" 
                    id="phoneNumber" 
                    class="settings-input" 
                    placeholder="972501234567"
                    dir="ltr"
                >
                <p class="settings-hint">××¡×¤×¨ ×¢× ×§×™×“×•××ª ××“×™× ×” ×œ×œ× + (×™×©×¨××œ: 972XXXXXXXXX)</p>
            </div>

            <button onclick="saveSettings()" class="btn" style="width: 100%;">
                ğŸ’¾ ×©××•×¨ ×”×’×“×¨×•×ª
            </button>
        </div>
    </div>

    <!-- Tasks List (Active) -->
    <div id="tasksList"></div>

    <!-- Reminder Modal -->
    <div id="reminderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: #25d366; margin: 0;">ğŸ“± ×ª×–×›×•×¨×ª WhatsApp</h2>
                <button onclick="closeReminderModal()" class="modal-close">âœ•</button>
            </div>
            <input type="hidden" id="reminderTaskId">
            <p style="color: #374151; margin-bottom: 15px;">
                ××©×™××”: <strong id="reminderTaskTitle"></strong>
            </p>
            <div class="settings-group">
                <label class="settings-label">â° ××ª×™ ×œ×©×œ×•×—?</label>
                <input type="datetime-local" id="reminderTime" class="settings-input" dir="ltr">
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button onclick="sendReminder(false)" class="btn btn-whatsapp" style="flex: 1;">
                    â° ×ª×–××Ÿ ×©×œ×™×—×”
                </button>
                <button onclick="sendReminder(true)" class="btn btn-secondary" style="flex: 1;">
                    ğŸ“¤ ×©×œ×— ×¢×›×©×™×•
                </button>
            </div>
        </div>
    </div>

    <!-- Sync Section -->
    <div class="sync-section">
        <h2 style="margin-bottom: 15px;">ğŸ’¾ ×’×™×‘×•×™ ×•×¡× ×›×¨×•×Ÿ</h2>
        <div class="sync-buttons">
            <button onclick="exportData()" class="btn btn-secondary">
                ğŸ“¥ ×™×™×¦× ×œ×§×•×‘×¥
            </button>
            <button onclick="document.getElementById('importFileInput').click()" class="btn btn-orange" style="cursor: pointer;">
                ğŸ“¤ ×™×™×‘× ××§×•×‘×¥ (××™×–×•×’ ×—×›×)
            </button>
        </div>
        <p style="color: #6b7280; font-size: 14px; margin-top: 10px;">
            ğŸ’¡ ×”×™×™×‘×•× ××–×”×” ×©×™× ×•×™×™× ×—×“×©×™× ×•××©×œ×‘ ××•×ª× ××•×˜×•××˜×™×ª ×œ×œ× ××—×™×§×ª × ×ª×•× ×™×
        </p>
    </div>

    <!-- List Selector -->
    <div class="list-selector">
        <label style="font-weight: bold; display: block; margin-bottom: 10px;">ğŸ“‹ ×‘×—×¨ ×¨×©×™××”:</label>
        <div class="list-control">
            <select id="listSelector" onchange="loadTasks()" style="flex: 1;">
                <option value="×›×œ×œ×™">×›×œ×œ×™</option>
            </select>
            <button onclick="showDeleteListConfirm()" class="btn btn-delete btn-small">ğŸ—‘ï¸</button>
        </div>
        <button onclick="showNewListForm()" class="btn btn-secondary" style="width: 100%;">
            + ×¨×©×™××” ×—×“×©×”
        </button>
        <div id="newListForm" class="hidden" style="margin-top: 15px;">
            <input type="text" id="newListName" placeholder="×©× ×”×¨×©×™××” ×”×—×“×©×”...">
            <div style="display: flex; gap: 10px;">
                <button onclick="createNewList()" class="btn btn-secondary" style="flex: 1;">×™×¦×™×¨×”</button>
                <button onclick="hideNewListForm()" class="btn" style="flex: 1; background: #6b7280;">×‘×™×˜×•×œ</button>
            </div>
        </div>
        <div id="deleteListConfirm" class="hidden" style="margin-top: 15px; padding: 15px; background: #fee2e2; border-radius: 8px;">
            <p style="color: #991b1b; font-weight: bold; margin-bottom: 10px;">
                âš ï¸ ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”×¨×©×™××”?
            </p>
            <div style="display: flex; gap: 10px;">
                <button onclick="deleteList()" class="btn btn-delete" style="flex: 1;">×›×Ÿ, ××—×§</button>
                <button onclick="hideDeleteListConfirm()" class="btn" style="flex: 1; background: #6b7280;">×‘×™×˜×•×œ</button>
            </div>
        </div>
        <div class="stats" style="margin-top: 15px;">
            <span class="stat-item">âœ… ×”×•×©×œ××•: <strong id="completedCount">0</strong></span>
            <span class="stat-item">â³ ×¤×¢×™×œ×•×ª: <strong id="activeCount">0</strong></span>
            <span class="stat-item">ğŸ“Š ×¡×”"×›: <strong id="totalCount">0</strong></span>
        </div>
    </div>

    <!-- Filter Section -->
    <div class="filter-section">
        <label style="font-weight: bold; display: block; margin-bottom: 10px;">ğŸ” ×¡×™× ×•×Ÿ:</label>
        <div class="filter-row">
            <select id="filterCategory" onchange="renderTasks()" style="flex: 1;">
                <option value="×”×›×œ">×›×œ ×”×§×˜×’×•×¨×™×•×ª</option>
                <option value="×›×œ×œ×™">×›×œ×œ×™</option>
                <option value="×¨×¤×•××™">×¨×¤×•××™</option>
                <option value="×‘×™×ª">×‘×™×ª</option>
                <option value="××©×¤×—×”">××©×¤×—×”</option>
                <option value="×˜×™×•×œ×™×">×˜×™×•×œ×™×</option>
            </select>
            <select id="filterStatus" onchange="renderTasks()" style="flex: 1;">
                <option value="active">×¨×§ ×¤×¢×™×œ×•×ª</option>
                <option value="completed">×¨×§ ×”×•×©×œ××•</option>
                <option value="deleted">×¨×§ × ××—×§×•</option>
                <option value="all">×”×›×œ</option>
            </select>
        </div>
    </div>

    <!-- Tasks List -->
    <div id="tasksList"></div>

    <!-- Task Form -->
    <div class="task-form">
        <h2 style="margin-bottom: 15px;" id="formTitle">â• ××©×™××” ×—×“×©×”</h2>
        <input type="text" id="taskTitle" placeholder="×ª×™××•×¨ ×”××©×™××”...">
        
        <select id="taskCategory">
            <option value="×›×œ×œ×™">×›×œ×œ×™</option>
            <option value="×¨×¤×•××™">×¨×¤×•××™</option>
            <option value="×‘×™×ª">×‘×™×ª</option>
            <option value="××©×¤×—×”">××©×¤×—×”</option>
            <option value="×˜×™×•×œ×™×">×˜×™×•×œ×™×</option>
        </select>

        <select id="taskPriority">
            <option value="×¨×’×™×œ">×¢×“×™×¤×•×ª ×¨×’×™×œ×”</option>
            <option value="×’×‘×•×”">×¢×“×™×¤×•×ª ×’×‘×•×”×”</option>
            <option value="× ××•×š">×¢×“×™×¤×•×ª × ××•×›×”</option>
        </select>

        <textarea id="taskNotes" placeholder="×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)" rows="3"></textarea>

        <div style="display: flex; gap: 10px;">
            <button onclick="saveTask()" class="btn" style="flex: 1;" id="saveBtn">â• ×”×•×¡×£ ××©×™××”</button>
            <button onclick="cancelEdit()" class="btn hidden" style="flex: 1; background: #6b7280;" id="cancelBtn">×‘×™×˜×•×œ</button>
        </div>
    </div>

    <!-- Notes Section -->
    <div class="notes-section">
        <h2 style="margin-bottom: 15px;">ğŸ“ ×”×¢×¨×•×ª ×•×”×“×‘×§×•×ª</h2>
        <textarea id="generalNotes" placeholder="×›×ª×•×‘ ×›××Ÿ ×”×¢×¨×•×ª ×›×œ×œ×™×•×ª, ×¨×¢×™×•× ×•×ª, ×§×™×©×•×¨×™×..." style="min-height: 150px;"></textarea>
        <p style="color: #6b7280; font-size: 14px; margin-top: 10px;">
            ×”×”×¢×¨×•×ª × ×©××¨×•×ª ××•×˜×•××˜×™×ª âœ“
        </p>
    </div>
</div>

<script>
    // VERSION INFO
    const APP_VERSION = '2.9.3';
    const VERSION_DATE = '26.02.2026';
    
    let tasks = [];
    let lists = ['×›×œ×œ×™'];
    let currentList = '×›×œ×œ×™';
    let editingTaskId = null;
    let listNotes = {}; // Notes per list
    let lastSyncDate = null;
    let userPhone = '';
    let accessCode = '';
    // â† ×”×›× ×¡ ×›××Ÿ ××ª ×”-URL ×©×œ×š ××—×¨×™ ×¤×¨×¡×•× ×‘-Google Apps Script
    const GAS_URL = 'https://script.google.com/macros/s/AKfycbzjZ-EXwOGX8xie5khRm0T9_NimTJDNONcY_94pYpNG6ToLYQkCsSqtnOVfPl1Cwcum/exec';

    // Load data on startup
    window.onload = () => {
        loadFromLocal();
        // Migrate old tasks to have deleted flag
        tasks = tasks.map(task => ({
            ...task,
            deleted: task.deleted || false
        }));
        saveToLocal();
        updateListSelector();
        updateNotesTextarea();
        renderTasks();
        updateStats();
        updateSyncDate();
    };

    function loadFromLocal() {
        // ×ª××™×›×” ×’× ×‘××¤×ª×—×•×ª ×™×©× ×™× (mathWebsite) ×•×’× ×—×“×©×™× (taskManager)
        const savedTasks = localStorage.getItem('taskManagerTasks') || localStorage.getItem('mathWebsiteTasks');
        if (savedTasks) {
            tasks = JSON.parse(savedTasks).map(task => ({
                ...task,
                listName: task.listName || '×›×œ×œ×™'
            }));
        }

        const savedLists = localStorage.getItem('taskManagerLists') || localStorage.getItem('mathWebsiteLists');
        if (savedLists) {
            lists = JSON.parse(savedLists);
        }

        const savedNotes = localStorage.getItem('taskManagerListNotes') || localStorage.getItem('mathWebsiteListNotes');
        if (savedNotes) {
            listNotes = JSON.parse(savedNotes);
        } else {
            const oldNotes = localStorage.getItem('mathWebsiteNotes');
            if (oldNotes) {
                listNotes = { [lists[0]]: oldNotes };
            }
        }

        const savedSyncDate = localStorage.getItem('taskManagerLastSync') || localStorage.getItem('mathWebsiteLastSync');
        if (savedSyncDate) {
            lastSyncDate = savedSyncDate;
        }

        const savedPhone = localStorage.getItem('taskManagerUserPhone');
        if (savedPhone) userPhone = savedPhone;

        const savedCode = localStorage.getItem('taskManagerAccessCode');
        if (savedCode) accessCode = savedCode;
    }

    function saveToLocal() {
        localStorage.setItem('taskManagerTasks', JSON.stringify(tasks));
        localStorage.setItem('taskManagerLists', JSON.stringify(lists));
        localStorage.setItem('taskManagerListNotes', JSON.stringify(listNotes));
    }

    function updateSyncDate() {
        const syncDateEl = document.getElementById('lastSyncDate');
        if (lastSyncDate) {
            const date = new Date(lastSyncDate);
            syncDateEl.textContent = `ğŸ“¥ ×™×™×‘×•× ××—×¨×•×Ÿ: ${date.toLocaleDateString('he-IL')} ${date.toLocaleTimeString('he-IL', {hour: '2-digit', minute: '2-digit'})}`;
            syncDateEl.classList.remove('hidden');
        }
    }

    function updateNotesTextarea() {
        const notesEl = document.getElementById('generalNotes');
        notesEl.value = listNotes[currentList] || '';
    }

    document.getElementById('generalNotes').addEventListener('input', (e) => {
        listNotes[currentList] = e.target.value;
        saveToLocal();
    });

    function showStatus(message) {
        const statusDiv = document.getElementById('statusMessage');
        statusDiv.innerHTML = `<div class="status-message">${message}</div>`;
        setTimeout(() => {
            statusDiv.innerHTML = '';
        }, 3000);
    }

    function scrollToAddTask() {
        // Cancel any existing edit
        cancelEdit();
        
        // Scroll to task form
        const taskForm = document.querySelector('.task-form');
        taskForm.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Focus on the task title input
        setTimeout(() => {
            document.getElementById('taskTitle').focus();
        }, 500);
    }

    function openSettings() {
        document.getElementById('phoneNumber').value = userPhone;
        document.getElementById('accessCode').value = accessCode;
        document.getElementById('settingsModal').classList.add('active');
    }

    function closeSettings() {
        document.getElementById('settingsModal').classList.remove('active');
    }

    async function saveSettings() {
        const phone = document.getElementById('phoneNumber').value.trim();
        const code  = document.getElementById('accessCode').value.trim();

        if (!code) {
            showStatus('âš ï¸ × × ×œ×”×–×™×Ÿ ×§×•×“ ×’×™×©×”');
            return;
        }

        if (!validateCodeLocally(code)) {
            showStatus('âŒ ×§×•×“ ×’×™×©×” ×œ× ×ª×§×™×Ÿ â€” ×—×™×™×‘ ×œ×”×™×•×ª ×œ×¤×—×•×ª 6 ×ª×•×•×™×');
            return;
        }

        if (!phone) {
            showStatus('âš ï¸ × × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ');
            return;
        }

        // ×©××•×¨ ××™×“ â€” GAS ×™×××ª ×‘×¤×•×¢×œ ×›×©×× ×¡×™× ×œ×©×œ×•×—
        userPhone  = phone;
        accessCode = code;
        localStorage.setItem('taskManagerUserPhone', phone);
        localStorage.setItem('taskManagerAccessCode', code);

        // ×©×œ×— ×•×œ×™×“×¦×™×” ×œ-GAS ×‘×¨×§×¢ (fire-and-forget)
        // ×× ×”×§×•×“ ×œ× ×ª×§×™×Ÿ â€” GAS ×™×©×œ×— ×œ×š ×”×ª×¨××”
        callGAS({ action: 'validate', accessCode: code, userPhone: phone }).catch(() => {});

        closeSettings();
        showStatus('âœ… ×”×”×’×“×¨×•×ª × ×©××¨×• â€” ×ª×§×‘×œ ×”×ª×¨××” ×× ×”×§×•×“ ×œ× ×ª×§×™×Ÿ');
    }

    function sendToWhatsApp(taskId, event) {
        event.stopPropagation();
        const task = tasks.find(t => t.id === taskId);
        if (!task) return;

        if (!userPhone) {
            openSettings();
            showStatus('âš ï¸ × × ×œ×”×’×“×™×¨ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×ª×—×™×œ×”');
            return;
        }

        openReminderModal(task);
    }

    function openReminderModal(task) {
        // ×”×’×“×¨ ×–××Ÿ ×‘×¨×™×¨×ª ××—×“×œ â€” ×©×¢×” ××¢×›×©×™×•
        const defaultTime = new Date(Date.now() + 60 * 60 * 1000);
        const pad = n => String(n).padStart(2, '0');
        const defaultStr = `${defaultTime.getFullYear()}-${pad(defaultTime.getMonth()+1)}-${pad(defaultTime.getDate())}T${pad(defaultTime.getHours())}:${pad(defaultTime.getMinutes())}`;
        
        document.getElementById('reminderTaskId').value = task.id;
        document.getElementById('reminderTaskTitle').textContent = task.title;
        document.getElementById('reminderTime').value = defaultStr;
        document.getElementById('reminderModal').classList.add('active');
    }

    function closeReminderModal() {
        document.getElementById('reminderModal').classList.remove('active');
    }

    // ×§×¨×™××” ×œ-GAS â€” no-cors ×¢×•×§×£ CORS ××‘×œ ×œ× ××—×–×™×¨ response
    // ×œ×›×Ÿ ×•×œ×™×“×¦×™×” × ×¢×©×™×ª locally, ×•×”×©×œ×™×—×” ×”×™× fire-and-forget
    async function callGAS(payload) {
        try {
            await fetch(GAS_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(payload)
            });
            return { success: true };
        } catch (err) {
            console.error('GAS call failed:', err);
            throw err;
        }
    }

    // ×•×œ×™×“×¦×™×” ××§×•××™×ª ×©×œ ×§×•×“ ×’×™×©×”
    // ×”×§×•×“ × ×©××¨ ×‘-localStorage ×•×××•××ª ×‘×¢×ª ×©×™××•×©
    // ×•×œ×™×“×¦×™×” ×××™×ª×™×ª ××•×œ ×”×©×¨×ª â€” GAS ×™×“×—×” ×‘×§×©×•×ª ×¢× ×§×•×“ ×©×’×•×™
    function validateCodeLocally(code) {
        return code && code.length >= 6;
    }
        const taskId = parseInt(document.getElementById('reminderTaskId').value);
        const task = tasks.find(t => t.id === taskId);
        if (!task) return;

        if (!accessCode) {
            closeReminderModal();
            openSettings();
            showStatus('âš ï¸ × × ×œ×”×’×“×™×¨ ×§×•×“ ×’×™×©×” ×ª×—×™×œ×”');
            return;
        }

        if (!userPhone) {
            closeReminderModal();
            openSettings();
            showStatus('âš ï¸ × × ×œ×”×’×“×™×¨ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×ª×—×™×œ×”');
            return;
        }

        const scheduledTime = sendNow
            ? new Date().toISOString()
            : new Date(document.getElementById('reminderTime').value).toISOString();

        const payload = {
            action: sendNow ? 'send_now' : 'schedule',
            taskId: task.id,
            taskTitle: task.title,
            taskNotes: task.notes || '',
            taskCategory: task.category,
            taskPriority: task.priority,
            scheduledTime,
            userPhone,
            accessCode
        };

        try {
            showStatus(sendNow ? 'âœ… ×”×ª×–×›×•×¨×ª × ×©×œ×—×”!' : 'âœ… ×”×ª×–×›×•×¨×ª ×ª×™×©×œ×— ×‘×–××Ÿ ×”× ×§×•×‘');
            closeReminderModal();
            callGAS(payload).catch(() => {
                showStatus('âš ï¸ ×©×’×™××ª ×—×™×‘×•×¨ â€” ×‘×“×•×§ ×©×”-URL ××•×’×“×¨');
            });
        } catch (err) {
            showStatus('âŒ ×©×’×™××ª ×—×™×‘×•×¨ ×œ×©×¨×ª');
            console.error(err);
        }
    }

    function exportData() {
        const dataToExport = {
            tasks,
            lists,
            listNotes,
            exportDate: new Date().toISOString(),
            version: APP_VERSION
        };

        const dataStr = JSON.stringify(dataToExport, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `tasks-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        showStatus('âœ… ×”×§×•×‘×¥ ×”×•×¨×“ ×‘×”×¦×œ×—×”!');
    }

    function importData(event) {
        // iOS fix â€” ×§×¦×ª ×¢×™×›×•×‘ ×œ×¤× ×™ ×§×¨×™××ª ×”×§×•×‘×¥
        setTimeout(() => {
            const file = event.target.files && event.target.files[0];
            if (!file) {
                showStatus('âŒ ×œ× × ×‘×—×¨ ×§×•×‘×¥');
                return;
            }

            showStatus('â³ ×§×•×¨× ×§×•×‘×¥: ' + file.name);

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    showStatus(`â³ × ××¦××•: ${importedData.tasks?.length || 0} ××©×™××•×ª, ${importedData.lists?.length || 0} ×¨×©×™××•×ª`);

                    if (importedData.tasks && importedData.lists) {
                        const merged = mergeData(importedData);
                        
                        tasks = merged.tasks;
                        lists = merged.lists;
                        
                        if (importedData.listNotes) {
                            listNotes = { ...listNotes, ...importedData.listNotes };
                        } else if (importedData.notes) {
                            if (!listNotes[lists[0]]) {
                                listNotes[lists[0]] = importedData.notes;
                            }
                        }
                        
                        lastSyncDate = new Date().toISOString();
                        localStorage.setItem('taskManagerLastSync', lastSyncDate);
                        
                        saveToLocal();
                        updateListSelector();
                        updateNotesTextarea();
                        renderTasks();
                        updateStats();
                        updateSyncDate();
                        
                        showStatus(`âœ… ×”××™×–×•×’ ×”×•×©×œ×! × ×•×¡×¤×• ${merged.addedCount} ××©×™××•×ª, ${lists.length} ×¨×©×™××•×ª`);
                    } else {
                        showStatus(`âŒ ×§×•×‘×¥ ×œ× ×ª×§×™×Ÿ â€” ××¤×ª×—×•×ª: ${Object.keys(importedData).join(', ')}`);
                    }
                } catch (error) {
                    showStatus(`âŒ ×©×’×™××”: ${error.message}`);
                }
            };
            reader.onerror = () => showStatus('âŒ ×©×’×™××” ×‘×§×¨×™××ª ×”×§×•×‘×¥');
            reader.readAsText(file);
            event.target.value = '';
        }, 300);
    }

    function mergeData(importedData) {
        // Create a map of existing tasks by ID
        const existingTasksMap = new Map(tasks.map(t => [t.id, t]));
        let addedCount = 0;
        let updatedCount = 0;
        
        // Merge tasks
        const mergedTasks = [...tasks];
        
        importedData.tasks.forEach(importedTask => {
            const existingTask = existingTasksMap.get(importedTask.id);
            
            if (!existingTask) {
                // New task - add it (including deleted tasks)
                mergedTasks.push({
                    ...importedTask,
                    deleted: importedTask.deleted || false
                });
                addedCount++;
            } else {
                // Task exists - check which is newer or has different status
                const importedDate = new Date(importedTask.createdAt || 0);
                const existingDate = new Date(existingTask.createdAt || 0);
                
                // If deleted status differs, use the one that's deleted (preserve deletions)
                const shouldUpdate = 
                    importedTask.deleted !== existingTask.deleted ||
                    importedTask.completed !== existingTask.completed ||
                    importedDate > existingDate;
                
                if (shouldUpdate) {
                    const index = mergedTasks.findIndex(t => t.id === importedTask.id);
                    if (index !== -1) {
                        mergedTasks[index] = {
                            ...importedTask,
                            deleted: importedTask.deleted || false
                        };
                        updatedCount++;
                    }
                }
            }
        });
        
        // Merge lists â€” ×’× ××”×¨×©×™××” ×•×’× ××ª×•×š ×”××©×™××•×ª ×¢×¦××Ÿ
        const listsFromTasks = mergedTasks.map(t => t.listName).filter(Boolean);
        const mergedLists = [...new Set([...lists, ...importedData.lists, ...listsFromTasks])];
        
        return {
            tasks: mergedTasks,
            lists: mergedLists,
            addedCount,
            updatedCount
        };
    }

    function showNewListForm() {
        document.getElementById('newListForm').classList.remove('hidden');
    }

    function hideNewListForm() {
        document.getElementById('newListForm').classList.add('hidden');
        document.getElementById('newListName').value = '';
    }

    function createNewList() {
        const name = document.getElementById('newListName').value.trim();
        if (!name) {
            showStatus('âŒ × × ×œ×”×–×™×Ÿ ×©× ×¨×©×™××”');
            return;
        }
        if (lists.includes(name)) {
            showStatus('âŒ ×¨×©×™××” ×¢× ×©× ×–×” ×›×‘×¨ ×§×™×™××ª');
            return;
        }
        
        lists.push(name);
        currentList = name;
        listNotes[name] = ''; // Initialize empty notes for new list
        saveToLocal();
        updateListSelector();
        updateNotesTextarea();
        hideNewListForm();
        renderTasks();
        showStatus('âœ… ×”×¨×©×™××” × ×•×¦×¨×” ×‘×”×¦×œ×—×”');
    }

    function showDeleteListConfirm() {
        if (lists.length <= 1) {
            showStatus('âŒ ×œ× × ×™×ª×Ÿ ×œ××—×•×§ - ×—×™×™×‘×ª ×œ×”×™×©××¨ ×œ×¤×—×•×ª ×¨×©×™××” ××—×ª');
            return;
        }
        document.getElementById('deleteListConfirm').classList.remove('hidden');
    }

    function hideDeleteListConfirm() {
        document.getElementById('deleteListConfirm').classList.add('hidden');
    }

    function deleteList() {
        const tasksInList = tasks.filter(t => t.listName === currentList && !t.deleted);
        
        if (tasksInList.length > 0) {
            if (!confirm(`×”×¨×©×™××” "${currentList}" ××›×™×œ×” ${tasksInList.length} ××©×™××•×ª ×¤×¢×™×œ×•×ª. ×”×× ××ª×” ×‘×˜×•×—?`)) {
                hideDeleteListConfirm();
                return;
            }
        }

        const listToDelete = currentList;
        lists = lists.filter(l => l !== currentList);
        
        // Mark all tasks in this list as deleted (not permanent delete)
        tasks.forEach(task => {
            if (task.listName === currentList) {
                task.deleted = true;
            }
        });
        
        // Delete notes for this list
        delete listNotes[listToDelete];
        
        currentList = lists[0];
        
        saveToLocal();
        updateListSelector();
        updateNotesTextarea();
        hideDeleteListConfirm();
        renderTasks();
        showStatus('âœ… ×”×¨×©×™××” × ××—×§×” ×•×”××©×™××•×ª ×”×•×¢×‘×¨×• ×œ× ××—×§×•×ª');
    }

    function updateListSelector() {
        const selector = document.getElementById('listSelector');
        selector.innerHTML = lists.map(list => 
            `<option value="${list}" ${list === currentList ? 'selected' : ''}>${list}</option>`
        ).join('');
    }

    function loadTasks() {
        currentList = document.getElementById('listSelector').value;
        updateNotesTextarea();
        renderTasks();
        updateStats();
    }

    function saveTask() {
        const title = document.getElementById('taskTitle').value.trim();
        if (!title) {
            showStatus('âŒ × × ×œ×”×–×™×Ÿ ×ª×™××•×¨ ××©×™××”');
            return;
        }

        if (editingTaskId) {
            // Edit existing task
            const task = tasks.find(t => t.id === editingTaskId);
            if (task) {
                task.title = title;
                task.category = document.getElementById('taskCategory').value;
                task.priority = document.getElementById('taskPriority').value;
                task.notes = document.getElementById('taskNotes').value;
                showStatus('âœ… ×”××©×™××” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”');
            }
        } else {
            // Add new task
            const task = {
                id: Date.now(),
                title: title,
                category: document.getElementById('taskCategory').value,
                priority: document.getElementById('taskPriority').value,
                notes: document.getElementById('taskNotes').value,
                completed: false,
                listName: currentList,
                createdAt: new Date().toISOString()
            };
            tasks.push(task);
            showStatus('âœ… ×”××©×™××” × ×•×¡×¤×” ×‘×”×¦×œ×—×”');
        }

        saveToLocal();
        cancelEdit();
        renderTasks();
        updateStats();
    }

    function editTask(id) {
        const task = tasks.find(t => t.id === id);
        if (!task) return;

        editingTaskId = id;
        document.getElementById('taskTitle').value = task.title;
        document.getElementById('taskCategory').value = task.category;
        document.getElementById('taskPriority').value = task.priority;
        document.getElementById('taskNotes').value = task.notes || '';
        
        document.getElementById('formTitle').textContent = 'âœï¸ ×¢×¨×™×›×ª ××©×™××”';
        document.getElementById('saveBtn').textContent = 'ğŸ’¾ ×©××•×¨ ×©×™× ×•×™×™×';
        document.getElementById('cancelBtn').classList.remove('hidden');
        
        // Scroll to form at bottom
        document.querySelector('.task-form').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function cancelEdit() {
        editingTaskId = null;
        document.getElementById('taskTitle').value = '';
        document.getElementById('taskCategory').value = '×›×œ×œ×™';
        document.getElementById('taskPriority').value = '×¨×’×™×œ';
        document.getElementById('taskNotes').value = '';
        
        document.getElementById('formTitle').textContent = 'â• ××©×™××” ×—×“×©×”';
        document.getElementById('saveBtn').textContent = 'â• ×”×•×¡×£ ××©×™××”';
        document.getElementById('cancelBtn').classList.add('hidden');
    }

    function toggleTask(id, event) {
        event.stopPropagation();
        const task = tasks.find(t => t.id === id);
        if (task) {
            task.completed = !task.completed;
            saveToLocal();
            renderTasks();
            updateStats();
        }
    }

    function deleteTask(id, event) {
        event.stopPropagation();
        const task = tasks.find(t => t.id === id);
        if (task) {
            task.deleted = true;
            saveToLocal();
            renderTasks();
            updateStats();
            showStatus('ğŸ—‘ï¸ ×”××©×™××” ×”×•×¢×‘×¨×” ×œ× ××—×§×•×ª');
        }
    }

    function permanentDeleteTask(id, event) {
        event.stopPropagation();
        if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××©×™××” ×–×• ×œ×¦××™×ª×•×ª? ×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨!')) {
            tasks = tasks.filter(t => t.id !== id);
            saveToLocal();
            renderTasks();
            updateStats();
            showStatus('âœ… ×”××©×™××” × ××—×§×” ×œ×¦××™×ª×•×ª');
        }
    }

    function restoreTask(id, event) {
        event.stopPropagation();
        const task = tasks.find(t => t.id === id);
        if (task) {
            task.deleted = false;
            saveToLocal();
            renderTasks();
            updateStats();
            showStatus('âœ… ×”××©×™××” ×©×•×—×–×¨×”');
        }
    }

    function updateStats() {
        const listTasks = tasks.filter(t => t.listName === currentList);
        const filterCat = document.getElementById('filterCategory').value;
        const filterStatus = document.getElementById('filterStatus').value;
        
        let filtered = filterCat === '×”×›×œ' ? listTasks : listTasks.filter(t => t.category === filterCat);
        
        // Apply status filter for stats
        if (filterStatus === 'active') {
            filtered = filtered.filter(t => !t.completed && !t.deleted);
        } else if (filterStatus === 'completed') {
            filtered = filtered.filter(t => t.completed && !t.deleted);
        } else if (filterStatus === 'deleted') {
            filtered = filtered.filter(t => t.deleted);
        } else if (filterStatus === 'all') {
            // Show all
        }
        
        const completed = filtered.filter(t => t.completed && !t.deleted).length;
        const active = filtered.filter(t => !t.completed && !t.deleted).length;
        const deleted = filtered.filter(t => t.deleted).length;
        
        document.getElementById('completedCount').textContent = completed;
        document.getElementById('activeCount').textContent = active;
        document.getElementById('totalCount').textContent = `${filtered.length} (ğŸ—‘ï¸ ${deleted})`;
    }

    function renderTasks() {
        const filterCat = document.getElementById('filterCategory').value;
        const filterStatus = document.getElementById('filterStatus').value;
        const listTasks = tasks.filter(t => t.listName === currentList);
        
        let filteredTasks = filterCat === '×”×›×œ' ? listTasks : listTasks.filter(t => t.category === filterCat);
        
        // Apply status filter
        if (filterStatus === 'active') {
            filteredTasks = filteredTasks.filter(t => !t.completed && !t.deleted);
        } else if (filterStatus === 'completed') {
            filteredTasks = filteredTasks.filter(t => t.completed && !t.deleted);
        } else if (filterStatus === 'deleted') {
            filteredTasks = filteredTasks.filter(t => t.deleted);
        } else if (filterStatus === 'all') {
            // Show all tasks
        }
        
        const activeTasks = filteredTasks.filter(t => !t.completed && !t.deleted);
        const completedTasks = filteredTasks.filter(t => t.completed && !t.deleted);
        const deletedTasks = filteredTasks.filter(t => t.deleted);

        let html = '';

        // Active tasks
        if (activeTasks.length > 0 && filterStatus !== 'completed' && filterStatus !== 'deleted') {
            html += '<h2 style="color: white; margin-bottom: 15px;">â³ ××©×™××•×ª ×¤×¢×™×œ×•×ª</h2>';
            activeTasks.forEach(task => {
                html += renderTask(task);
            });
        }

        // Completed tasks
        if (completedTasks.length > 0 && (filterStatus === 'completed' || filterStatus === 'all')) {
            html += '<h2 style="color: white; margin: 30px 0 15px;">âœ… ××©×™××•×ª ×©×”×•×©×œ××•</h2>';
            completedTasks.forEach(task => {
                html += renderTask(task);
            });
        }

        // Deleted tasks
        if (deletedTasks.length > 0 && (filterStatus === 'deleted' || filterStatus === 'all')) {
            html += '<h2 style="color: white; margin: 30px 0 15px;">ğŸ—‘ï¸ ××©×™××•×ª ×©× ××—×§×•</h2>';
            deletedTasks.forEach(task => {
                html += renderTask(task);
            });
        }

        if (filteredTasks.length === 0) {
            html = '<div class="task-item" style="text-align: center; border: none;"><p>××™×Ÿ ××©×™××•×ª ×œ×”×¦×’×” ğŸ¯</p></div>';
        }

        document.getElementById('tasksList').innerHTML = html;
        updateStats();
    }

    function renderTask(task) {
        const isDeleted = task.deleted;
        const isCompleted = task.completed && !task.deleted;
        
        let actions = '';
        if (isDeleted) {
            // Deleted task actions
            actions = `
                <button onclick="restoreTask(${task.id}, event)" class="btn btn-small btn-secondary">
                    â†©ï¸ ×©×—×–×¨
                </button>
                <button onclick="permanentDeleteTask(${task.id}, event)" class="btn btn-small btn-delete">
                    âŒ ××—×™×§×” ×œ×¦××™×ª×•×ª
                </button>
            `;
        } else {
            // Active/Completed task actions
            actions = `
                <button onclick="toggleTask(${task.id}, event)" class="btn btn-small btn-secondary">
                    ${task.completed ? 'â†©ï¸' : 'âœ“'}
                </button>
                <button onclick="sendToWhatsApp(${task.id}, event)" class="btn btn-small btn-whatsapp" title="×©×œ×— ×ª×–×›×•×¨×ª ×‘×•×•××˜×¡××¤">ğŸ“±</button>
                <button onclick="deleteTask(${task.id}, event)" class="btn btn-small btn-delete">ğŸ—‘ï¸</button>
            `;
        }
        
        return `
            <div class="task-item ${isCompleted ? 'completed' : ''} ${isDeleted ? 'deleted' : ''} ${editingTaskId === task.id ? 'selected' : ''}" ${!isDeleted ? `onclick="editTask(${task.id})"` : ''}>
                <div class="task-header">
                    <div class="task-title ${isCompleted ? 'completed' : ''} ${isDeleted ? 'completed' : ''}">${task.title}</div>
                    <div class="task-actions">
                        ${actions}
                    </div>
                </div>
                <div class="task-meta">
                    <span class="badge badge-category">${task.category}</span>
                    <span class="badge badge-priority-${task.priority}">${task.priority}</span>
                    <span class="badge" style="background: #f3f4f6; color: #6b7280;">
                        ${new Date(task.createdAt).toLocaleDateString('he-IL')}
                    </span>
                    ${isDeleted ? '<span class="badge" style="background: #fee2e2; color: #991b1b;">ğŸ—‘ï¸ × ××—×§</span>' : ''}
                </div>
                ${task.notes ? `<div class="task-notes">${task.notes}</div>` : ''}
            </div>
        `;
    }
</script>
```

</body>
</html>